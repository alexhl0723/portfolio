---
import Barra from '../icons/barra.astro';
import X from '../icons/x.astro';
import { translate } from '../utils/translate';
import BottomNav from './BottomNav.astro';

  const {locale, t} = translate(Astro.url.pathname);
  const title = "AH";
---

<script src="../components/js/menuMobil.js"></script>

<header class="justify-center top-0 w-full z-50 fixed px-4 py-3 m-auto items-center  backdrop-blur-[1px]">
  <div class="max-w-5xl mx-auto flex items-center justify-between">
    
    <a href={Astro.url.pathname} class="text-4xl font-bold bg-gradient-to-r from-white to-yellow-200 bg-clip-text text-transparent hover:scale-105 transition-all">
      {title}
    </a>
    <div class="hidden lg:block">
      <BottomNav/>
    </div>
    <!-- Navegación para desktop -->
    <nav class="hidden md:block">
      <!-- Nuevo selector de idioma para desktop -->
      <div class="language-switcher relative">
        <div class="flex bg-gray-800 rounded-full overflow-hidden border border-gray-700">
          <a href="/es" class={`px-3 py-1 text-sm transition-all duration-300 ${locale === 'es' ? 'text-black font-medium bg-yellow-200' : 'text-gray-300 hover:text-white'}`}>ES</a>
          <a href="/en" class={`px-3 py-1 text-sm transition-all duration-300 ${locale === 'en' ? 'text-black font-medium bg-yellow-200' : 'text-gray-300 hover:text-white'}`}>EN</a>
          <a href="/ja" class={`px-3 py-1 text-sm transition-all duration-300 ${locale === 'ja' ? 'text-black font-medium bg-yellow-200' : 'text-gray-300 hover:text-white'}`}>JA</a>
          <a href="/fr" class={`px-3 py-1 text-sm transition-all duration-300 ${locale === 'fr' ? 'text-black font-medium bg-yellow-200' : 'text-gray-300 hover:text-white'}`}>FR</a>
        </div>
        <span class="absolute inset-0 rounded-full bg-yellow-200/20 scale-0 group-hover:scale-110 transition-transform duration-300 -z-10"></span>
          </div>
        </li>
      </ul>
    </nav>

    <!-- Botón hamburguesa simple como en la imagen -->
    <div class="flex gap-6 md:hidden justify-between">
      <!-- Nuevo selector de idioma para móvil -->
      <div class="language-switcher-mobile relative">
        <div class="flex bg-gray-800 rounded-full overflow-hidden border border-gray-700">
          <a href="/es" class={`px-2 py-1 text-xs transition-all duration-300 ${locale === 'es' ? 'text-black font-medium bg-yellow-200' : 'text-gray-300 hover:text-white'}`}>ES</a>
          <a href="/en" class={`px-2 py-1 text-xs transition-all duration-300 ${locale === 'en' ? 'text-black font-medium bg-yellow-200' : 'text-gray-300 hover:text-white'}`}>EN</a>
          <a href="/ja" class={`px-2 py-1 text-xs transition-all duration-300 ${locale === 'ja' ? 'text-black font-medium bg-yellow-200' : 'text-gray-300 hover:text-white'}`}>JP</a>
          <a href="/fr" class={`px-2 py-1 text-xs transition-all duration-300 ${locale === 'fr' ? 'text-black font-medium bg-yellow-200' : 'text-gray-300 hover:text-white'}`}>FR</a>
          </div>
      </div>
      <button id="menu-toggle" class="md:hidden text-white focus:outline-none">
        <Barra class="w-6 h-6" />
      </button>
    </div>
  </div>  

  <!-- Línea decorativa con gradiente -->
  <div class="absolute bottom-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-gray-800 to-transparent"></div>
  
  <!-- Menú móvil desplegable (solo visible al hacer clic en menú) -->
  <div id="mobile-menu" class="hidden fixed inset-0 bg-black h-screen bg-opacity-95 z-50 items-center justify-center">
    <div class="container mx-auto px-6">
      <div class="flex justify-end mb-12">
        <button id="close-menu" class="text-white">
          <X class="w-10 h-10 pt-2" />
        </button>
      </div>
      
      <ul class="flex flex-col items-start gap-6 ">
        <li class="w-full border-b border-gray-800 pb-4">
          <a href={`#${t.links.projects}`} class="text-xl text-gray-300 hover:text-white transition-colors ">
            {t.links.projects}
          </a>
        </li>
        <li class="w-full border-b border-gray-800 pb-4">
          <a href={`#${t.links.skills}`} class="text-xl text-gray-300 hover:text-white transition-colors">
            {t.links.skills}
          </a>
        </li>
        <li class="mt-6">
          <a 
            href="/CVAlexRodrigoHerbasLeiva.pdf"
            class="inline-block px-6 py-3 text-black font-medium bg-white rounded-full hover:bg-yellow-200 transition-colors duration-300"
            download
          >
            {t.header.download_cv}
          </a>
        </li>
        <!-- Selector de idioma en el menú móvil -->
        <li class="mt-6 w-full flex justify-center">
          <div class="language-switcher-menu">
            <div class="flex bg-gray-800 rounded-full overflow-hidden border border-gray-700 p-1">
              <a href="/es" class={`px-4 py-2 text-sm rounded-full transition-all duration-300 ${locale === 'es' ? 'text-black font-medium bg-yellow-200' : 'text-gray-300 hover:text-yellow-100'}`}>ES</a>
              <a href="/en" class={`px-4 py-2 text-sm rounded-full transition-all duration-300 ${locale === 'en' ? 'text-black font-medium bg-yellow-200' : 'text-gray-300 hover:text-yellow-100'}`}>EN</a>
              <a href="/ja" class={`px-4 py-2 text-sm rounded-full transition-all duration-300 ${locale === 'ja' ? 'text-black font-medium bg-yellow-200' : 'text-gray-300 hover:text-yellow-100'}`}>JA</a>
              <a href="/fr" class={`px-4 py-2 text-sm rounded-full transition-all duration-300 ${locale === 'fr' ? 'text-black font-medium bg-yellow-200' : 'text-gray-300 hover:text-yellow-100'}`}>FR</a>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</header>